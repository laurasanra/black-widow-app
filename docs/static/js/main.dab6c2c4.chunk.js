(this["webpackJsonpblack-widow-app"]=this["webpackJsonpblack-widow-app"]||[]).push([[0],{444:function(e,t,n){},451:function(e,t,n){"use strict";n.r(t);n(106),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(166),n(168),n(169),n(170),n(171),n(172),n(174),n(131),n(177),n(178),n(80),n(182),n(183),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(199),n(200),n(201),n(202),n(203),n(137),n(138),n(205),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(140),n(222),n(223),n(224),n(225),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(236),n(237),n(238),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(96),n(257),n(258),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(143),n(278),n(279),n(145),n(280),n(281),n(282),n(283),n(82),n(284),n(285),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(349),n(350),n(152),n(352),n(353),n(354),n(355),n(357),n(153),n(388),n(361),n(435),n(439);var c=n(2),a=n.n(c),r=n(366),s=n.n(r),i=(n(444),n(43)),o=n(84),u=n(28),l=n(29),j=n(31),b=n(30),d=n(1),f=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.number,c=e.filter,a=e.updateFilter,r=e.sortItem,s=e.updateSort;return Object(d.jsxs)("div",{className:"filter-box",children:[Object(d.jsxs)("div",{className:"filters-container",children:[Object(d.jsx)("input",{type:"text",placeholder:"Search...",value:c.query,onChange:function(e){a(Object(o.a)(Object(o.a)({},c),{},{query:e.target.value}))}}),Object(d.jsxs)("select",{name:"select",value:c.select,onChange:function(e){a(Object(o.a)(Object(o.a)({},c),{},{select:e.target.value}))},children:[Object(d.jsx)("option",{value:"",children:"Select an event"},"empty"),t.map((function(e){return Object(d.jsx)("option",{value:e,children:e},e)}))]})]}),Object(d.jsxs)("div",{className:"options-container",children:[Object(d.jsx)("div",{className:"clear-button",onClick:function(e){a({query:"",select:""})},children:"CLEAR"}),Object(d.jsxs)("div",{className:"sort-button",onClick:function(e){s("A-Z"===r?"Z-A":"A-Z")},children:["SORT BY ","A-Z"===r?"Z-A":"A-Z"]}),Object(d.jsxs)("p",{className:"results-text",children:[n," results"]})]})]})}}]),n}(a.a.Component),h=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"loading-spinner",children:Object(d.jsx)("div",{className:"loading-head"})})}}]),n}(a.a.Component),O=n(42),p=n.n(O),m=n(367),v=n(61),x=n(368),y=n.n(x),C=function(e){var t=[];return e.events.items.map((function(e){return t.push(e.name)})),{events:t,image:e.thumbnail.path+"."+e.thumbnail.extension,comicsNumber:e.comics.available}},g=function(e){var t=[];return e.events.items.map((function(e){return t.push(e.name)})),{id:e.id,title:e.title,events:t}},N=function(e){if(e.length>0){for(var t=e[0].name,n=1;n<e.length;n++)t+=", ".concat(e[n].name);return t}};function S(e){return w.apply(this,arguments)}function w(){return(w=Object(v.a)(p.a.mark((function e(t){var n,c,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],c=0;c<t;c+=90)a="https://gateway.marvel.com/v1/public/characters/1009189/comics?apikey=80118dfe89fca0550baf8f8ab8785904&hash=afe8eff7ea8c246fcdb1cdaeb784f811&ts=1&limit=90&offset=".concat(c),n.push(a);return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){var e=Object(v.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:if(!((n=e.sent).length>0)){e.next=14;break}return e.prev=4,c=[],e.next=8,Promise.all(n.map((function(e){return fetch(e)}))).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(e){var t,n=Object(m.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.data.results.forEach((function(e){var t=g(e);if(!c.find((function(e){return e.id===t.id})))return c.push(t)}))}}catch(a){n.e(a)}finally{n.f()}}));case 8:return e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(4),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),A=n(60),I=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.comic;return Object(d.jsx)(A.b,{to:"/comic/".concat(e.id),children:Object(d.jsx)("li",{className:"comic-card",children:Object(d.jsx)("p",{children:e.title})})},e.id)}}]),n}(a.a.Component),E=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"noresults-text",children:"There are no results for your search"})}}]),n}(a.a.Component),T=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.elements;return e.length<1?Object(d.jsx)(E,{}):Object(d.jsx)("ul",{className:"list-container",children:e.map((function(e){return Object(d.jsx)(I,{comic:e},e.id)}))})}}]),n}(a.a.Component),R=function(e,t){localStorage.setItem(e,JSON.stringify(t))},L=function(e){var t=localStorage.getItem(e);if(null!==t)return JSON.parse(t)},M=function(e){var t=e.numberOfComics,n=e.selectOptions,r=Object(c.useState)(!0),s=Object(i.a)(r,2),o=s[0],u=s[1],l=Object(c.useState)([]),j=Object(i.a)(l,2),b=j[0],O=j[1],p=Object(c.useState)([]),m=Object(i.a)(p,2),v=m[0],x=m[1],y=Object(c.useState)({query:"",select:""}),C=Object(i.a)(y,2),g=C[0],N=C[1],S=Object(c.useState)("A-Z"),w=Object(i.a)(S,2),A=w[0],I=w[1];return Object(c.useEffect)((function(){var e=L("COMICS_LIST"),n=L("COMICS_FILTER"),c=L("COMICS_SORT");n&&N(n),c&&I(c),e?(O(e),setTimeout((function(){u(!1)}),1500)):k(t).then((function(e){O(e),R("COMICS_LIST",e),setTimeout((function(){u(!1)}),1500)}))}),[t]),Object(c.useEffect)((function(){R("COMICS_FILTER",g),R("COMICS_SORT",A);var e=function(e,t){return e.filter((function(n){return""===t.select&&""===t.query?e:""!==t.select?n.events.includes(t.select)&&n.title.toLowerCase().includes(t.query.toLowerCase()):n.title.toLowerCase().includes(t.query.toLowerCase())}))}(b,g);x(function(e,t){return e&&"A-Z"===t?e.sort((function(e,t){return e.title>t.title?1:e.title<t.title?-1:0})):e&&"Z-A"===t?e.sort((function(e,t){return e.title<t.title?1:e.title>t.title?-1:0})):e}(e,A))}),[b,g,A]),Object(d.jsxs)(a.a.Fragment,{children:[Object(d.jsx)(f,{options:n,number:v?v.length:0,filter:g,updateFilter:N,sortItem:A,updateSort:I}),o?Object(d.jsx)(h,{}):Object(d.jsx)(T,{elements:v})]})},Z=n(19),q=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(d.jsx)(A.b,{to:"/",children:Object(d.jsx)("div",{className:"back-button",children:Object(d.jsx)("p",{children:"GO BACK"})})})}}]),n}(a.a.Component),_=function(){var e=Object(v.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://gateway.marvel.com:443/v1/public/comics/".concat(t,"?apikey=80118dfe89fca0550baf8f8ab8785904&hash=afe8eff7ea8c246fcdb1cdaeb784f811&ts=1"),e.prev=1,e.next=4,fetch(n).then((function(e){return e.json()})).then((function(e){var t,n={id:(t=e.data.results[0]).id,title:t.title,image:t.images[0].path+"."+t.images[0].extension,description:t.description,pages:t.pageCount,series:t.series.name,onSaleDate:y()(t.dates[0].date).format("DD/MM/YYYY"),creators:N(t.creators.items),characters:N(t.characters.items),events:N(t.events.items)};c=n}));case 4:return e.abrupt("return",c);case 7:e.prev=7,e.t0=e.catch(1),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.comic;return Object(d.jsxs)("div",{className:"comic-detail-card",children:[Object(d.jsx)("h2",{className:"card-title",children:e.title}),Object(d.jsxs)("div",{className:"card-body",children:[e.description&&Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:"text-bolder",children:"Description: "}),Object(d.jsx)("span",{children:e.description})]}),e.series&&Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:"text-bolder",children:"Series: "}),Object(d.jsx)("span",{children:e.series})]}),e.pages&&Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:"text-bolder",children:"N\xba of pages: "}),Object(d.jsx)("span",{children:e.pages})]}),e.onSaleDate&&Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:"text-bolder",children:"Sale date: "}),Object(d.jsx)("span",{children:e.onSaleDate})]}),e.events&&Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:"text-bolder",children:"Events: "}),Object(d.jsx)("span",{children:e.events})]}),e.creators&&Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:"text-bolder",children:"Creators: "}),Object(d.jsx)("span",{children:e.creators})]}),e.characters&&Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:"text-bolder",children:"Characters: "}),Object(d.jsx)("span",{children:e.characters})]})]})]})}}]),n}(a.a.Component),F=function(){var e=Object(c.useState)(!0),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),s=Object(i.a)(r,2),o=s[0],u=s[1],l=Object(Z.e)().id;return Object(c.useEffect)((function(){_(l).then((function(e){u(e),a(!1)}))}),[l]),n?Object(d.jsx)(h,{}):Object(d.jsxs)("div",{children:[Object(d.jsx)(q,{}),Object(d.jsxs)("div",{className:"details-container",children:[Object(d.jsx)("img",{className:"comic-picture",src:o.image,alt:"comic"}),Object(d.jsx)(D,{comic:o})]})]})},Y=function(){var e=Object(v.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://gateway.marvel.com:443/v1/public/characters/1009189?apikey=80118dfe89fca0550baf8f8ab8785904&hash=afe8eff7ea8c246fcdb1cdaeb784f811&ts=1").then((function(e){return e.json()})).then((function(e){var n=C(e.data.results[0]);t=n}));case 3:return e.abrupt("return",t);case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();var B=function(){var e=Object(c.useState)(void 0),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=L("CHARACTER");e?r(e):Y().then((function(e){r(e),R("CHARACTER",e)}))}),[]),n?Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("header",{className:"main-header",children:[Object(d.jsx)("img",{className:"main-picture",src:n.image,alt:"black_widow"}),Object(d.jsx)("h1",{className:"main-title",children:"Black Widow"})]}),Object(d.jsx)("main",{children:Object(d.jsxs)(A.a,{children:[Object(d.jsx)(Z.a,{path:"/",exact:!0,children:Object(d.jsx)(M,{numberOfComics:n.comicsNumber,selectOptions:n.events})}),Object(d.jsx)(Z.a,{path:"/comic/:id",children:Object(d.jsx)(F,{})})]})})]}):a.a.Fragment};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root"))}},[[451,1,2]]]);
//# sourceMappingURL=main.dab6c2c4.chunk.js.map